<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <title>SAFE – E2Ebox | Mini App</title>

  <!-- Viewport settings -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="color-scheme" content="dark light">

  <!-- Material Icons (required for icon buttons in input fields) -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <!-- Main stylesheet -->
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <div class="app-shell">
    <!-- Header -->
    <header class="app-header">
      <div class="app-header__left">
        <div class="brand-chip">
          <div class="brand-chip__icon" aria-hidden="true">
            <div class="brand-chip__icon" aria-hidden="true" style="background-color: black;">
              <img src="avatar.png" alt="Avatar" style="width:100%;height:100%;object-fit:cover;border-radius:50%;">
            </div>
          </div>
          <div class="brand-chip__text">
            <div class="brand-chip__title">
              SAFE – E2Ebox
              <img src="tick.png" alt="" style="width:16px;height:16px;vertical-align:middle;object-fit:contain;margin-left:4px;">
            </div>
            <div class="brand-chip__subtitle">Secure Asynchronous File Encryption</div>
          </div>
        </div>
      </div>
      <div class="app-header__right">
        <div class="user-pill">
          <div class="user-pill__avatar" aria-hidden="true">✈</div>
          <div class="user-pill__meta">
            <span class="user-pill__name">@username</span>
            <span class="user-pill__hint">Telegram account</span>
          </div>
        </div>
      </div>
    </header>

    <!-- Main layout -->
    <main class="app-main">
      <section class="intro-strip">
        <h1 class="intro-strip__title">SAFE control panel</h1>
        <p class="intro-strip__subtitle">
          Manage all SAFE actions from one place: encryption, decryption, keys, profile,
          payments, coins and support. All crypto operations will run only on your device;
          this interface is just the controller.
        </p>
      </section>

      <div class="layout">
        <!-- Primary navigation (left column) -->
        <nav class="nav">
          <!-- Group: Crypto operations -->
          <section class="nav-group">
            <h2 class="nav-group__title">Crypto operations</h2>
            <button class="nav-item nav-item--active" data-section="crypto">
              <span class="nav-item__label">Encryption / Decryption</span>
              <span class="nav-item__hint">
                Start new jobs or review recent activity
              </span>
            </button>
          </section>

          <!-- Group: Keys & profile -->
          <section class="nav-group">
            <h2 class="nav-group__title">Account & keys</h2>
            <button class="nav-item" data-section="key">
              <span class="nav-item__label">Key status</span>
              <span class="nav-item__hint">
                View and manage your personal encryption key
              </span>
            </button>
            <button class="nav-item" data-section="profile">
              <span class="nav-item__label">My profile</span>
              <span class="nav-item__hint">
                Plan, limits, status and global usage
              </span>
            </button>
          </section>

          <!-- Group: Money / store -->
          <section class="nav-group">
            <h2 class="nav-group__title">Billing & coins</h2>
            <button class="nav-item" data-section="transactions">
              <span class="nav-item__label">Transactions</span>
              <span class="nav-item__hint">
                All payments and financial events
              </span>
            </button>
            <button class="nav-item" data-section="store">
              <span class="nav-item__label">Store</span>
              <span class="nav-item__hint">
                Buy SAFE coins or upgrade your plan
              </span>
            </button>
            <button class="nav-item" data-section="coins">
              <span class="nav-item__label">My coins</span>
              <span class="nav-item__hint">
                Balance, referrals and coin transfers
              </span>
            </button>
          </section>

          <!-- Group: Support -->
          <section class="nav-group">
            <h2 class="nav-group__title">Support & policy</h2>
            <button class="nav-item" data-section="support">
              <span class="nav-item__label">Support & rules</span>
              <span class="nav-item__hint">
                Help, contact, usage rules and privacy
              </span>
            </button>
          </section>
        </nav>

        <!-- Content area (right column) -->
        <section class="content">

          <!-- Section: Crypto operations -->
          <section class="panel-section panel-section--active" id="section-crypto">
            <header class="panel-section__header">
              <h2 class="panel-section__title">Crypto operations</h2>
              <p class="panel-section__subtitle">
                Start a fresh encryption or decryption job, or review the latest sessions.
              </p>
            </header>

            <div class="panel-grid">
              <!-- Encrypt column -->
              <article class="panel-card">
                <header class="panel-card__header">
                  <h3 class="panel-card__title">Encrypt</h3>
                  <p class="panel-card__subtitle">
                    Protect a new file on your device and get a <code>.SAFE</code> file as result.
                  </p>
                </header>
                <div class="panel-card__body">
                  <div class="option-list">
                    <button class="option-item" id="btn-encrypt-new">
                      <div class="option-item__main">
                        <span class="option-item__label">Start new encryption</span>
                        <span class="option-item__hint">
                          Choose a file, set a strong password and create a new SAFE file.
                        </span>
                      </div>
                      <span class="option-item__badge">New</span>
                    </button>
                    <button class="option-item option-item--secondary">
                      <div class="option-item__main">
                        <span class="option-item__label">Recent encryptions</span>
                        <span class="option-item__hint">
                          See the last 10 encryption jobs with size, date, status and coins used.
                        </span>
                      </div>
                    </button>
                    <button class="option-item option-item--ghost">
                      <div class="option-item__main">
                        <span class="option-item__label">Back to main menu</span>
                        <span class="option-item__hint">
                          Return to the primary SAFE menu in the bot.
                        </span>
                      </div>
                    </button>
                  </div>
                </div>
              </article>

              <!-- Decrypt column -->
              <article class="panel-card">
                <header class="panel-card__header">
                  <h3 class="panel-card__title">Decrypt</h3>
                  <p class="panel-card__subtitle">
                    Open an existing <code>.SAFE</code> file and restore the original data.
                  </p>
                </header>
                <div class="panel-card__body">
                  <div class="option-list">
                    <button class="option-item" id="btn-decrypt-new">
                      <div class="option-item__main">
                        <span class="option-item__label">Start new decryption</span>
                        <span class="option-item__hint">
                          Select a SAFE file, enter the password and recover the original file.
                        </span>
                      </div>
                      <span class="option-item__badge">Free</span>
                    </button>
                    <button class="option-item option-item--secondary">
                      <div class="option-item__main">
                        <span class="option-item__label">Recent decryptions</span>
                        <span class="option-item__hint">
                          Review the last 10 decryption jobs and their results.
                        </span>
                      </div>
                    </button>
                    <button class="option-item option-item--ghost">
                      <div class="option-item__main">
                        <span class="option-item__label">Back to main menu</span>
                        <span class="option-item__hint">
                          Return to the primary SAFE menu in the bot.
                        </span>
                      </div>
                    </button>
                  </div>
                </div>
              </article>
            </div>
          </section>

          <!-- Section: Key status -->
          <section class="panel-section" id="section-key">
            <header class="panel-section__header">
              <h2 class="panel-section__title">Key status</h2>
              <p class="panel-section__subtitle">
                Overview of your personal encryption key: masked preview, last update,
                status and last usage.
              </p>
            </header>

            <article class="panel-card panel-card--wide">
              <div class="panel-card__body panel-card__body--split">
                <dl class="data-list">
                  <div class="data-list__row">
                    <dt>Masked key</dt>
                    <dd><code>as••••xc</code></dd>
                  </div>
                  <div class="data-list__row">
                    <dt>Status</dt>
                    <dd><span class="tag tag--success">Active</span></dd>
                  </div>
                  <div class="data-list__row">
                    <dt>Last updated</dt>
                    <dd>—</dd>
                  </div>
                  <div class="data-list__row">
                    <dt>Last used in crypto job</dt>
                    <dd>—</dd>
                  </div>
                </dl>

                <div class="option-list option-list--compact">
                  <button class="option-item">
                    <div class="option-item__main">
                      <span class="option-item__label">Register / update key</span>
                      <span class="option-item__hint">
                        Set or rotate your personal key. In some plans this is limited
                        to once every 7 days.
                      </span>
                    </div>
                  </button>
                  <button class="option-item option-item--secondary">
                    <div class="option-item__main">
                      <span class="option-item__label">Cancel key</span>
                      <span class="option-item__hint">
                        Mark the key as cancelled so files tied to it cannot be recovered.
                      </span>
                    </div>
                  </button>
                  <button class="option-item option-item--ghost">
                    <div class="option-item__main">
                      <span class="option-item__label">Restore cancelled key</span>
                      <span class="option-item__hint">
                        Restore a previously cancelled key when allowed by your plan.
                      </span>
                    </div>
                  </button>
                </div>
              </div>
            </article>
          </section>

          <!-- Section: Profile -->
          <section class="panel-section" id="section-profile">
            <header class="panel-section__header">
              <h2 class="panel-section__title">My profile</h2>
              <p class="panel-section__subtitle">
                High-level information about your SAFE account: ID, status, plan and usage.
              </p>
            </header>

            <article class="panel-card panel-card--wide">
              <div class="panel-card__body panel-card__body--split">
                <dl class="data-list">
                  <div class="data-list__row">
                    <dt>Telegram user ID</dt>
                    <dd>—</dd>
                  </div>
                  <div class="data-list__row">
                    <dt>First seen in SAFE</dt>
                    <dd>—</dd>
                  </div>
                  <div class="data-list__row">
                    <dt>Account status</dt>
                    <dd><span class="tag tag--success">Active</span></dd>
                  </div>
                  <div class="data-list__row">
                    <dt>Current plan</dt>
                    <dd>Free plan</dd>
                  </div>
                  <div class="data-list__row">
                    <dt>Plan expiration</dt>
                    <dd>Unlimited for free tier</dd>
                  </div>
                  <div class="data-list__row">
                    <dt>Total operations</dt>
                    <dd>— (encrypt + decrypt + others)</dd>
                  </div>
                </dl>

                <div class="option-list option-list--compact">
                  <button class="option-item">
                    <div class="option-item__main">
                      <span class="option-item__label">Upgrade plan</span>
                      <span class="option-item__hint">
                        Switch to Silver or Gold for better limits and speed.
                      </span>
                    </div>
                  </button>
                  <button class="option-item option-item--secondary">
                    <div class="option-item__main">
                      <span class="option-item__label">Export full report</span>
                      <span class="option-item__hint">
                        Download detailed account report as an Excel file (paid plans only).
                      </span>
                    </div>
                  </button>
                  <button class="option-item option-item--ghost option-item--danger">
                    <div class="option-item__main">
                      <span class="option-item__label">Delete account</span>
                      <span class="option-item__hint">
                        Start the 3-step account deletion flow with confirmation code.
                      </span>
                    </div>
                  </button>
                </div>
              </div>
            </article>
          </section>

          <!-- Section: Transactions -->
          <section class="panel-section" id="section-transactions">
            <header class="panel-section__header">
              <h2 class="panel-section__title">Transactions</h2>
              <p class="panel-section__subtitle">
                All payments related to coins and plan upgrades, including failed or cancelled attempts.
              </p>
            </header>

            <article class="panel-card panel-card--wide">
              <div class="panel-card__body">
                <div class="table">
                  <div class="table__head">
                    <div class="table__row">
                      <div class="table__cell table__cell--head">Form ID</div>
                      <div class="table__cell table__cell--head">Item</div>
                      <div class="table__cell table__cell--head">Amount</div>
                      <div class="table__cell table__cell--head">Invoice status</div>
                      <div class="table__cell table__cell--head">Payment status</div>
                    </div>
                  </div>
                  <div class="table__body">
                    <div class="table__row table__row--empty">
                      <div class="table__cell" colspan="5">
                        No transactions yet. Once you purchase coins or upgrade a plan,
                        they will appear here.
                      </div>
                    </div>
                  </div>
                </div>

                <div class="table-actions">
                  <button class="btn btn--primary btn--sm">Refresh list</button>
                  <button class="btn btn--ghost btn--sm">
                    Export as Excel (paid plans only)
                  </button>
                </div>
              </div>
            </article>
          </section>

          <!-- Section: Store -->
          <section class="panel-section" id="section-store">
            <header class="panel-section__header">
              <h2 class="panel-section__title">Store</h2>
              <p class="panel-section__subtitle">
                Buy SAFE coins or upgrade your plan. Payments can be processed via
                local gateways or Telegram TON wallet.
              </p>
            </header>

            <div class="panel-grid panel-grid--stack">
              <article class="panel-card">
                <header class="panel-card__header">
                  <h3 class="panel-card__title">Buy coins</h3>
                  <p class="panel-card__subtitle">
                    Choose a coin package and complete payment through your preferred method.
                  </p>
                </header>
                <div class="panel-card__body">
                  <ul class="package-list">
                    <li class="package">
                      <div class="package__main">
                        <span class="package__name">50 SAFE coins</span>
                        <span class="package__desc">Recommended for light usage.</span>
                      </div>
                      <div class="package__meta">
                        <span class="package__price">≈ 1 USD</span>
                        <button class="btn btn--primary btn--sm">Select</button>
                      </div>
                    </li>
                    <li class="package">
                      <div class="package__main">
                        <span class="package__name">100 SAFE coins</span>
                        <span class="package__desc">Balanced for regular users.</span>
                      </div>
                      <div class="package__meta">
                        <span class="package__price">≈ 2 USD</span>
                        <button class="btn btn--primary btn--sm">Select</button>
                      </div>
                    </li>
                    <li class="package">
                      <div class="package__main">
                        <span class="package__name">500 SAFE coins</span>
                        <span class="package__desc">Best value for heavy usage.</span>
                      </div>
                      <div class="package__meta">
                        <span class="package__price">≈ 8 USD</span>
                        <button class="btn btn--primary btn--sm">Select</button>
                      </div>
                    </li>
                  </ul>
                </div>
              </article>

              <article class="panel-card">
                <header class="panel-card__header">
                  <h3 class="panel-card__title">Upgrade plan</h3>
                  <p class="panel-card__subtitle">
                    Move from Free to Bronze, Silver or Gold and unlock higher limits and speed.
                  </p>
                </header>
                <div class="panel-card__body">
                  <ul class="package-list">
                    <li class="package">
                      <div class="package__main">
                        <span class="package__name">Bronze plan</span>
                        <span class="package__desc">Basic paid tier with fair limits.</span>
                      </div>
                      <div class="package__meta">
                        <span class="package__price">Entry level</span>
                        <button class="btn btn--secondary btn--sm">Details</button>
                      </div>
                    </li>
                    <li class="package">
                      <div class="package__main">
                        <span class="package__name">Silver plan</span>
                        <span class="package__desc">
                          Better performance and key flexibility.
                        </span>
                      </div>
                      <div class="package__meta">
                        <span class="package__price">Most popular</span>
                        <button class="btn btn--secondary btn--sm">Details</button>
                      </div>
                    </li>
                    <li class="package">
                      <div class="package__main">
                        <span class="package__name">Gold plan</span>
                        <span class="package__desc">
                          Priority queues and maximum throughput.
                        </span>
                      </div>
                      <div class="package__meta">
                        <span class="package__price">Pro users</span>
                        <button class="btn btn--secondary btn--sm">Details</button>
                      </div>
                    </li>
                  </ul>
                </div>
              </article>
            </div>
          </section>

          <!-- Section: My coins -->
          <section class="panel-section" id="section-coins">
            <header class="panel-section__header">
              <h2 class="panel-section__title">My coins</h2>
              <p class="panel-section__subtitle">
                See your SAFE coin balance, referral stats and send coins to other users.
              </p>
            </header>

            <article class="panel-card panel-card--wide">
              <div class="panel-card__body panel-card__body--split">
                <dl class="data-list">
                  <div class="data-list__row">
                    <dt>Total coins</dt>
                    <dd>0</dd>
                  </div>
                  <div class="data-list__row">
                    <dt>Received coins</dt>
                    <dd>0</dd>
                  </div>
                  <div class="data-list__row">
                    <dt>Last received from</dt>
                    <dd>—</dd>
                  </div>
                  <div class="data-list__row">
                    <dt>Sent coins</dt>
                    <dd>0</dd>
                  </div>
                  <div class="data-list__row">
                    <dt>Last sent to</dt>
                    <dd>—</dd>
                  </div>
                </dl>

                <div class="option-list option-list--compact">
                  <button class="option-item">
                    <div class="option-item__main">
                      <span class="option-item__label">Increase coins</span>
                      <span class="option-item__hint">
                        Buy coins from the store or earn via referrals.
                      </span>
                    </div>
                  </button>
                  <button class="option-item option-item--secondary">
                    <div class="option-item__main">
                      <span class="option-item__label">Referral link</span>
                      <span class="option-item__hint">
                        Share your personal invite link and receive bonus coins.
                      </span>
                    </div>
                  </button>
                  <button class="option-item option-item--ghost">
                    <div class="option-item__main">
                      <span class="option-item__label">Transfer coins</span>
                      <span class="option-item__hint">
                        Send coins to another verified SAFE user (with limits).
                      </span>
                    </div>
                  </button>
                </div>
              </div>
            </article>
          </section>
          <!-- Section: Support & rules -->
          <!-- Section: Support & rules -->
          <section class="panel-section" id="section-support">
            <header class="panel-section__header">
              <h2 class="panel-section__title">Support & rules</h2>
              <p class="panel-section__subtitle">
                Read the main rules, privacy notes and contact the SAFE team for help.
              </p>
            </header>
            <article class="panel-card panel-card--wide">
               <div class="panel-card__body panel-card__body--stack">
                <!-- این باکس اسکرول‌دار قوانین است -->
                <div class="support-rules-box">
                  <pre id="support-rules-text" class="support-rules-text">
          Loading SAFE rules…</pre>
                </div>
                <!-- دکمه‌های پایین، مثل قبل -->
                <div class="support-actions">
                  <button class="btn btn--primary btn--sm" data-support="chat">
                    Open support chat
                  </button>
                  <button class="btn btn--ghost btn--sm" data-support="faq">
                     View FAQ
                  </button>
                </div>
              </div>
            </article>
          </section>
        </section>
      </div>
    </main>

    <footer class="app-footer">
      <span>SAFE – E2Ebox © 2025</span>
      <span class="app-footer__hint">
        All cryptographic operations will run only on your device in the final version.
      </span>
    </footer>
  </div>

<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script src="lang.js"></script>
<script src="ui_core.js"></script>
<script src="ui_encrypt.js"></script>
<script src="ui_decrypt.js"></script>
<script src="ui_support.js"></script>
<script src="ui_profile.js"></script>
<!-- <script src="ui_account_deletion.js"></script> -->
<script src="script.js"></script>
<script src="telegram.js"></script>


</body>
</html>
